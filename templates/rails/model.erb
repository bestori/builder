class <%= model_name %> < ActiveRecord::Base

<%

    text = ""
    required = ''

    schema['columns'].each_pair do |name,column|
        required << ":#{name}, " if name != 'id' && column['is_nullable'] == 'NO'
    end
    
    if required.length > 0
      text << 'validates ' + required + ' presence: true' + "\n" 
    end
    
    schema['has_many'].flatten.each do |key|
      #key = key[0] if key.is_a? Array
    	text << ('  has_many :' + key.pluralize + "\n")
    end
 
    schema['belongs_to'].flatten.each do |key|
      #key = key[0] if key.is_a? Array
      text << ('  belongs_to :' + key.singularize + "\n")
    end
   
%>
	<%= text %>
end
