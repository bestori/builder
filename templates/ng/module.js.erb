'use strict';

/* module */

// model/service
/*
 * return an ngResource object with the default actions
 
{ 'get':    {method:'GET'},
    'save':   {method:'POST'},
    'query':  {method:'GET', isArray:true},
    'remove': {method:'DELETE'},
    'delete': {method:'DELETE'} };
 */ 
angular.module('<%= namespace || "mainapp" %>').factory('<%= model_name %>', ['$resource',
  function($resource){
    return $resource('<%= namespace.nil? ? "" : namespace + '/' %><%= plural_table_name %>/:<%= singular_table_name %>Id.json', {}, {
      list: {method:'GET',  isArray:true}
    });
  }]);

// list controller
angular.module('<%= namespace || "mainapp" %>')
 // enclose dependencies as strings within brackets to avoid minification and create the
 // controller as an anonymous function
 .controller('<%= model_name %>ListCtrl', [ '$scope', '<%= model_name %>', 
    function ($scope, <%= model_name %>) {
    
      $scope.<%= plural_table_name %> = <%= model_name %>.list();
 
      $scope.orderProp = 'id';
    }]);


  // detail controller
angular.module('<%= namespace || "mainapp" %>')
 // enclose dependencies as strings within brackets to avoid minification and create the
 // controller as an anonymous function
 .controller('<%= model_name %>DetailCtrl', [ '$scope',  '$routeParams',  '<%= model_name %>',
    function($scope, $routeParams, <%= model_name %>) {
      
      $scope.<%= singular_table_name %> = <%= model_name %>
      .get({<%= singular_table_name %>Id: $routeParams.<%= singular_table_name %>Id});
    
    }]);
  

 /*
 
 
these work directly with $http


// list controller
angular.module('<%= namespace || "mainapp" %>')
 // enclose dependencies as strings within brackets to avoid minification and create the
 // controller as an anonymous function
 .controller('<%= model_name %>ListCtrl', [
 '$scope', 
 '$http', 
 function ($scope, $http) {
    
    $http.get('<%= namespace.nil? ? "" : namespace + '/' %><%= plural_table_name %>.json').success(function(data) {
      $scope.<%= plural_table_name %> = data;
    });
 
    $scope.orderProp = 'id';
  }
  ]
  );


  // detail controller
angular.module('<%= namespace || "mainapp" %>')
 // enclose dependencies as strings within brackets to avoid minification and create the
 // controller as an anonymous function
 .controller('<%= model_name %>DetailCtrl', [
 '$scope', 
 '$routeParams', 
 '$http',
 function($scope, $routeParams, $http) {
    $scope.<%= singular_table_name %>Id = $routeParams.<%= singular_table_name %>Id;
    
    $http.get('<%= namespace.nil? ? "" : namespace + '/' %><%= plural_table_name %>/' + $routeParams.<%= singular_table_name %>Id + '.json')
      .success(function(data) {
        $scope.<%= singular_table_name %> = data;
      });
  }
  ]
  );
  

 -----------------------------
<%= singular_table_name %>Module.factory("<%= singular_table_name %>Service", [$resource, function($resource) {
    return $resource("/<%= plural_table_name %>/:id", {id: "@id"}, {
    	update: {method: "PUT"}
    	});
}]);

*/

