<% 
default_namefield = nil
singlename = singular_table_name
columns = schema['columns']

rejected_columns = ['id' ]

columns.each_pair do |name,column| 
  # get the name of the first field that is not called 'id' as default  
  if default_namefield.nil? && name != 'id'  && name !~ /_id/  
    # use this column unless it is the id primary key or a foreign key
    default_namefield = column
  end 
end 

# determine the display field names
namefield = columns['name'] || columns['title'] || default_namefield
descfield = columns['description'] || columns['info'] || 
  columns['summary'] || columns['comment'] || columns['snippet']
%>

<style type="text/css">

  table.<%= model_name %> th, table.<%= model_name %> td {
    padding: 2px;
    border: 1px solid #428bca;

  }

  button {
    padding 2px;
    margin-right: 10px;
  }
</style>
<!--
        enable if the class has a main image
<img ng-src="{{mainImageUrl}}" class="<%= singlename %>">
-->

<h1>{{<%= singlename %>.<%= namefield['column_name'] %>}}</h1>

<% unless descfield.nil? %>
  <p>{{<%= singlename %>.descfield['column_name']}}</p>
<% end %>

<!--          
        enable and rename accordingly if the class has an array of images
<ul class="<%= singlename %>-thumbs">
  <li ng-repeat="img in <%= singlename %>.images">
    <img ng-src="{{img}}" ng-click="setImage(img)">
  </li>
</ul>
-->

<span><%= model_name.titleize %> Detail</span>



<table class="<%= model_name %>">
  <tbody>
    <% columns.keys.reject{|key| rejected_columns.include?(key)  }.each do |key| %>
      <tr>
        <th><%= key.titleize %> </th><td>{{<%= singlename %>.<%= key %>}}</td>
      </tr>
    <% end %>

  </tbody>

</table>

<!-- include the standard links   [back, edit, new, delete, history] -->
<div style="margin-top: 10px;">
  <a class="btn btn-inverse" onclick="javascript:history.go(-1)">Back</a> 
  <a class="btn btn-warning" href="<%= angular_url(plural_table_name) %>/{{ <%= singlename %>.id }}/edit" >Edit</a>
  <a class="btn btn-success" href="<%= angular_url(plural_table_name) %>/new" >New</a>
  <a class="btn btn-danger" href="<%= angular_url(plural_table_name) %>/{{ <%= singlename %>.id }}/delete" confirm='Are you sure?'>Delete</a>
  <a class="btn btn-primary" href="<%= angular_url(plural_table_name) %>/{{ <%= singlename %>.id }}/history" >History</a>

  <!--
    other button classes
    btn-info, btn-inverse
  -->

</div>

<!--
as links
<div>
  <a href="javascript:history.go(-1)">Back</a>  |
  <a href="<%= angular_url(plural_table_name) %>/{{ <%= singlename %>Id }}/edit" title="Edit this <%= model_name %>">Edit</a> |
  <a href="<%= angular_url(plural_table_name) %>/new" title="Create a new <%= model_name %>">New</a> |
  <a href="<%= angular_url(plural_table_name) %>/{{ <%= singlename %>Id }}/delete" title="Delete this <%= model_name %>">Delete</a> | 
  <a href="<%= angular_url(plural_table_name) %>/{{ <%= singlename %>Id }}/history" title="View the journal history for this <%= model_name %>">History</a>

</div>
-->
